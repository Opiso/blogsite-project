{% extends 'partials/base.html' %}
{% block title %} Admin Dashboard {% endblock %}
{% load crispy_forms_tags %}
{% block content %}

{% load static %}
{% if messages %}
    <div class="alert-container">
        {% if messages %}
        {% for message in messages %}
        <div class="alert {{ message.tags }} text-center {% if message.tags == 'success' %} alert-success text-success {% elif message.tags == 'error' %} alert.error text-danger {% endif %}" 
            style="font-size: larger; font-weight: bold; font-style: italic; line-height: 3px;">{{ message }}
        </div>
        {% endfor %}
        {% endif %}
    </div>
{% endif %}

<style>
    .admin div div{
        display: flex;
        height: 100px;
        align-items: center;
        justify-content: center;
        color: white;
        font-weight: bold;
        margin: 10px;
        font-size: larger;

    }

    .admin div div div:hover{
        cursor: pointer;
        opacity: 0.7;

    }
    .feedbacks p a:hover{
        color: blueviolet;
        border-bottom: 1px solid blueviolet;
        transition: 0.5s ease;
    }
</style>

{% if request.user.is_staff %}
<div class="container admin" style="padding: 30px;">
    <h2 class="d-flex justify-content-center text-primary fw-bold">I'm Here because I'm Admin!! ðŸ˜ŠðŸ˜ŠðŸ˜Š</h2><hr class="fw-bold" style="color: black; width: 62%; margin-left: 20%; margin-right: 20%;">
    <h2 class="d-flex justify-content-center fw-bold">Page Summary</h2>
    <div class="row">
        <div>
            <div class="col-md-6 bg-success text-white rounded">
                <div>
                <p>TOTAL USERS: {{ total_users }} </p>
                </div>
            </div>            
            <div class="col-md-6 bg-primary text-white rounded">
                USER WITH MOST POSTS: {{most_active_user_name}} ({{most_active_user_posts}} posts)
            </div>
        </div>
    </div>
    <div class="row">
        <div>
            <div class="col-md-4 bg-secondary rounded">
                <p>Total Posts: {{ total_posts }}</p>
            </div>
            <div class="col-md-4 bg-warning rounded">
                POSTS in {{month}} {{year}} : {{ posts_this_month}}
            </div>
            <div class="col-md-4 bg-info rounded">
                TODAY's POSTS: {{ posts_today }}
            </div>
        </div>
    </div>
    <div class="feedbacks">
        <p><a class="fs-3 text-primary m-3" style="text-decoration: none;" href="{% url 'blog-customers' %}">View All Users</a></p>
        <p><a class="fs-3 text-primary m-3" style="text-decoration: none;" href="{% url 'blog-feedbacks' %}">View Feedbacks</a></p>
    </div>
</div>
{%else%}
<div class="container admin p-5">
    <h3 class="justify-content-center">Hi {{request.user.first_name}}, Sorry but you cannot view that page because you are not an Admin. <br> Welcome <a class="comments" href="{% url 'blog-index' %}"> HOME</a></h3>
</div>
{% endif %}
<div class="mt-5">
{% include 'partials/footer.html' %}
</div>
{% endblock %}